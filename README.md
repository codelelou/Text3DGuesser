# 概要
3Dの文字を横から見て、それが何かを当てるゲームのテンプレートです。  
出題リストを書き換えることで、ゲームをカスタマイズできます。  

![タイトル画面](https://github.com/user-attachments/assets/071ceec4-fb3c-41f9-a617-27a58a25b567)
![出題画面](https://github.com/user-attachments/assets/122a40a9-4199-4d2b-9310-8a7e65a1ebb6)
![回答画面](https://github.com/user-attachments/assets/60db9097-c452-455b-a3ea-850fbbae1b67)

ゲームエンジンはUnreal Engineです。  
カメラの邪魔にならない範囲であれば背景などもお好みでカスタマイズ可能です。

Unreal Engineの入門・初心者向けに、Unreal Engineのインストールとパッケージ化（配布用exeファイルの作成）の練習用に作りました。  
プログラミング不要で、書式にそってファイル編集するだけでゲームをカスタマイズできるようにしています。  

そしてゲーム開発のステップアップとして、このテンプレートの前に公開した[Findloople](https://github.com/codelelou/Findloople)に進んでいただければと思います。  
Findloopleはプログラミング不要で8番ライクゲームも作れるお探しゲームのテンプレートです。  

# 導入（開発環境構築）
このゲームのテンプレートはゲームエンジンのUnreal Engineのプロジェクトファイルのため、Unreal Engineをインストールする必要があります。  

## Unreal Engineのバージョン
Unreal Engine 5.5  

このバージョン以降のもであれば動作する可能性は高いですが、Unreal Engineのアップデートによっては下位互換がなくなりそのままでは正常に動作しなくなることはあります。  
この場合はこのゲームのテンプレートの対応バージョンのUnreal Engineをインストールしてください（1つの端末に異なる複数のバージョンのUnreal Engineのインストールは可能です）。  

なお、このゲームのテンプレートのアップデート時に対応するUnreal Engineのバージョンが変更になることもあります。  

## Unreal Engineのインストール
インストールについてはUnreal Engine全般のテーマのため、詳しくは[Unreal Engineダウンロードページ](https://www.unrealengine.com/ja/download)や解説動画などを参考にしてください。  

「Unreal Engine インストール」や「Unreal Engine 入門」などのキーワードで探してみてください。  
このゲームのテンプレートを編集する前に、入門者向け・初心者向けの動画などでイメージを掴んでおくのも良いと思います。  

## ゲームのテンプレートをダウンロードする
GitHubページ上の緑色の［Code］ボタンを左クリックし、表示されるメニューの［Download ZIP］ボタンを左クリックします。  
案内に従ってそのZIPファイルを端末に保存してください。  

![テンプレートのダウンロードリンクの場所の図解](https://github.com/user-attachments/assets/8d907578-07b3-4d61-83eb-8d723b8d651f)

ダウンロードが完了したらそのZIPファイルをわかりやすい場所に展開（解凍）します。  
ゲーム開発ではSSDなどの高速ストレージに展開することを推奨します。  

またディレクトリ構造が深いとゲームエンジンの不具合に繋がることがあるため、浅いディレクトリ階層に展開してください（例えば「D:\UnrealProjects\Text3DGuesser」など）。  
あわせて親フォルダも含めてフォルダ名は半角英数字のみで構成するようにしてください（Unreal Engineに限らずゲーム開発ではフォルダ名・ファイル名に日本語があると不具合の原因になることがあります）。  

そして展開したUnreal EngineプロジェクトファイルであるText3DGuesser.uproject（ファイル名は変更可能ですが、Unreal Engineの仕様により20文字以内推奨）をダブルクリックすれば、対応するUnreal Engineが起動し編集できるようになると思います。  
もし直接開けない場合は、次で説明するUnreal Engineを起動してからプロジェクトファイルを指定して開く方法を試してください。  

## Unreal Engineを起動する
起動するとプロジェクトブラウザが開くと思うので、左上の［最近使用したプロジェクト］を左クリックし、右下の［ブラウズ］ボタンを左クリックしてください（以前からUnreal Engineを使っている場合は自動的に最近開いていたプロジェクトが自動ロードされてしまっている場合があるので、その場合はそれを閉じてプロジェクトブラウザを開いてください）。  

そして先程ダウンロードして展開したゲームのテンプレートのアンリアルプロジェクトファイル「Text3DGuesser.uproject」を開いてください。  
これでこのゲームのテンプレートを編集できるようになると思います。  

# フォルダ構成  
* Lelool … 共通プログラムファイルで変更非推奨（中級者・上級者向け）
* Localization … 国際化ファイルで直接変更非推奨（Unreal Engine標準のローカライゼーションダッシュボードが生成するフォルダ・ファイル）
* Text3DGuesser … ゲームテンプレートの本体

![フォルダ構成の図解](https://github.com/user-attachments/assets/911cc99d-44c9-41ce-84fb-94d3e81ceed1)

# ゲームのカスタマイズ  
3ステップでゲームのカスタマイズが可能です。  

1. 出題リストの作成  
2. T3G_BP_FunctionLibraryの編集（ゲームの情報や出題リストの設定）  
3. プロジェクト設定（Unreal Engine標準の設定画面でゲーム起動時のウィンドウ名などを編集）  

## 【ステップ1】出題リストの作成
デモ用の出題リストは /Text3DGuesser/Quiz/ のフォルダにあります。  
出題リストはT3G_Struct_Question構造体（/Text3DGuesser/Blurprint/T3G_Struct_Question.uasset）として定義しています。  

* T3G_DataTable_Quiz_Fish … 魚へんの漢字
* T3G_DataTable_Quiz_FourSeasons … 四季（英語）
* T3G_DataTable_Quiz_Zodiac_Easy … 十二支（かんたん）
* T3G_DataTable_Quiz_Zodiac_English … 十二支（英語）
* T3G_DataTable_Quiz_Zodiac_Normal … 十二支（ノーマル）

![出題リストフォルダの図解](https://github.com/user-attachments/assets/a53780a6-f4be-4923-a5cf-1a652b01a843)

### 出題リストの書式
![出題リストの書式の図解](https://github.com/user-attachments/assets/a9fb5d96-5693-4265-9a58-41d669011a26)

* 行の名前 … 問題となる3Dとして表示される文字（フォントが対応していない文字は表示されない恐れがあります）。
* Answers …【拡張用】回答をキーボード入力できるようにした際など漢字やカタカナなどのゆらぎに対応するために補助的項目。
* Name … 回答の選択肢として表示。  
![出題リストのNameのゲーム内表示位置の図解](https://github.com/user-attachments/assets/4701169b-f839-4a50-b28a-170bbea29c80)
* Description … 正解時に補足説明（読み方など）として表示。
![出題リストのDescriptionのゲーム内表示位置の図解](https://github.com/user-attachments/assets/421fbdba-29df-4f6d-b440-9d0117695a5e)

### 出題リストの新規作成  
1. /Text3DGuesser/Quizフォルダを開く。  
2. Quizフォルダ内の余白で右クリックして追加メニューを表示する。  
3. ［その他 > データテーブル］を左クリックする。  
4. 行構造に「T3G_Struct_Question」を選択して［OK］ボタンを左クリックする。  
5. 新規作成されたデータテーブルファイルをお好みでわかりやすいファイル名にする。  

![出題リストの新規作成の図解](https://github.com/user-attachments/assets/c097244d-e3f4-4298-8a1e-78fd489ad0d5)
![出題リストの行構造指定の図解](https://github.com/user-attachments/assets/61c096d2-393b-4e3d-874f-253e51a97615)

開いた出題リストに行を追加するには、そのデータテーブルファイル編集画面内の［追加］ボタンを左クリックします。  

![データテーブルに行を追加する図解](https://github.com/user-attachments/assets/c6306084-e54f-42c7-9028-27710a025f0c)

## 【ステップ2】T3G_BP_FunctionLibraryの編集
T3G_BP_FunctionLibrary（/Text3DGuesser/Blurprint/T3G_BP_FunctionLibrary.uasset）を開き、出題リストやゲーム名などの設定を行います。  

![T3G_BP_FunctionLibraryの開き方の図解](https://github.com/user-attachments/assets/ca38d000-ed16-4625-b10a-6e3fe33d95f3)

## GetQuizDataTables関数
タイトル画面のテーマ（出題リスト）を設定します。  

QuizListローカル変数を左クリックし、エディタ右側に標準タブのデフォルト値に出題リストの名前とデータテーブルファイルを設定してください。  
デフォルト値欄の［QuizList］の右側にあるプラス記号のアイコンを左クリックすることで項目（エレメント）を追加できます（デモ用の出題リストの設定も参考にしてください）。  

デモ用の出題リストなど項目を削除する場合は、削除したい項目の［2メンバー］の右側にある下矢印を左クリックし、［削除］ボタンを左クリックしてください。  

![出題リストの設定方法の図解](https://github.com/user-attachments/assets/4d07b867-4c99-4497-840a-7592eb852f9a)

## GetGameInfo関数
* Title … タイトル画面やライセンス表示に使用されます。  
* Version … タイトル画面に使用されます（リリース時に「ver.01.00.00」としておきアップデート時に繰り上げておくと問い合わせ対応などの際に便利です）。  
* Copyright … タイトル画面に表示されます。  
* Year … ライセンス表示に使用されます（ゲーム公開年を入力してください）。

![GetGameInfo関数の図解](https://github.com/user-attachments/assets/d531ae50-98d6-4385-8dce-8cd7c8590705)

# 【ステップ3】プロジェクト設定
エディタ上部の［編集 > プロジェクト設定］を左クリックし、プロジェクト設定を開きます。  

![プロジェクト設定の開き方の図解](https://github.com/user-attachments/assets/12eca421-b4b9-442b-b0ba-ef8f9531a293)

［プロジェクト > 説明］を左クリックし、「プロジェクト名」と「プロジェクト名が表示されたタイトル」にゲームタイトルを必要なら変更してください。  
ゲーム起動時のウィンドウ名などに反映されます。  

![プロジェクト設定のゲームタイトルに関する編集箇所の図解](https://github.com/user-attachments/assets/71ce8dd2-d0f6-4824-a762-282f0270ddeb)

# 動作確認
エディタ上でゲームをプレイするには、エディタ上部中央左付近の矢印マークが並んだエリアの右端にある点が縦に3つ並んだボタンを左クリックし、	［新規エディタウィンドウ（PIE）］ボタンを左クリックします。  

![エディタプレイ方法の図解](https://github.com/user-attachments/assets/0dd206c2-09c2-4216-88b5-b188111adc87)

なお、このプレイモードではタイトル画面や環境設定画面の表示言語の切替は正常に動作しません。  
またこのモードで言語を切り替えた場合は、エディタの表示言語も切り替わってしまうため注意してください。  

言語の切替も確認したい場合は［スタンドアロンゲーム］モードでプレイしてください（このモードは実行までに多少時間がかかります）。  

# パッケージ化（配布用EXEファイル作成）
作ったゲームをパッケージ化することで、他のPCやスマートフォンなどで遊べるようになります。  
Unreal Engine 5はパソコンやスマートフォン以外にも、ゲームコンソール（Switch/PlayStation/Xboxなど）にも対応しています。  
※このテンプレートはWindows向けの動作確認しかしていません。  

どのプラットフォーム向けにパッケージ化するにしても、そのプラットフォーム向けに別途SDKのインストールなど準備が必要です。  
もしすでにUnreal Engineでゲームを開発していてパッケージ化の準備が完了しているのであれば、すぐにパッケージ化できるかと思います。  

ただパッケージ化に関してはこのゲームのテンプレート固有のテーマではないため、詳しいパッケージ化の手順などについては公式ドキュメントや動画などを参考にしてください。  

「UE5 パッケージ化」などのキーワードでネットや動画を検索してみてください。  
なおUnreal Engineのバージョンや開発環境がWindowsかMacなどかによって必要なものや手順が異なることがあるため、1つの情報だけでは上手くできない可能性があります。  

もしパッケージ化が失敗する場合、まずはこのゲームのテンプレートを編集せずにそのままパッケージ化を試してみても良いかもしれません。  
この時点で失敗する場合はパッケージ化の準備が不十分であると考えられますし、成功する場合はカスタマイズしたゲーム側に問題があると考えられます。  

なおパッケージ化に関しては普通にプログラミングできる人でも苦戦することは珍しくない躓きポイントですので、上手くいかなくてもあまり気にする必要はありません。  
ゲーム開発者でもパッケージ化経験がない人は少なくないでしょうし、そもそもゲームを完成することなく頓挫することも珍しくはありません。  
そのためにパッケージ化に関する情報自体が少ないです。  

## パッケージ化の手順
Windows向けのパッケージ化の準備が完了している場合、次の手順でパッケージ化可能です。  
細かい設定を行うことでパッケージ化したファイルを小さくしたり暗号化したりもできますが、ここでは割愛します。  

![パッケージ化ボタン位置の図解](https://github.com/user-attachments/assets/d977798d-4556-4759-a494-533d7c1c56c0)

エディタ上部中央の［プラットフォーム］ボタンを左クリックしてメニューを開き、［コンテンツ/SDK/デバイス管理 > Windows］を開きます。  
この時、［Windows］の前にビックリマークアイコンが表示されている場合はパッケージ化の準備が完了していないと思われます。  
そして［バイナリ コンフィギュレーション > シッピング］が有効（白い点）になっていなければ、それを左クリックして有効にしてください。  
［シッピング］が有効であれば、［コンテンツ管理 > プロジェクトをパッケージ化］を左クリックしてください。  
保存先のディレクトリを聞かれるので、パッケージ化用にわかりやすいフォルダを作って指定します。  

これでパッケージ化の処理がはじまります。  

パッケージ化時間はゲームの内容や開発端末性能（おそらくCPU性能）で大きく異なります。  
ハイスペックゲーミングPC程度の環境であれば1分程度ですが、ロースペックPC環境だと数十分以上掛かる可能性があります。  

完了後は成功しても失敗しても音で通知してくれるはずです。  

パッケージ化が成功していれば、指定したフォルダに「Windows」フォルダができていて、その中に配布用ファイル一式がまとめっていると思います。
配布する時はそのWindowsフォルダをZIP化するなどして公開すると良いでしょう（Steamなどのストアで公開する時は、ストアの指示に従ってください）。  

設定などを変更していなければ「Text3DGuesser.exe」をダブルクリックすればゲームが起動するはずです。  
実は恐ろしい話ですが、エディタ上では問題なく動作していても、パッケージ化すると動作しなくなることは珍しくなく、配布用のファイルでもテストプレイが必要です（ゲームエンジンそのものにもバグはありえます）。  

# よくある質問
このゲームのサンプルはライセンスが非常に緩いMITライセンスで公開しており、ライセンスを守ってライセンス表記さえすれば非常に自由度が高いです。  
もちろん、他に併用するライブラリなどがある場合はそれらのライセンスの確認は必要です。  

## サンプルゲームをゲーム実況しても良いですか？
問題ありません。  

## このゲームのテンプレートで作ったゲームを有料で販売しても良いですか？
問題ありません。  

## このゲームのテンプレートで作ったゲームのソースコードは非公開でも良いですか？
問題ありません。  

## このゲームのテンプレートの有料教材を作っても良いですか？
問題ありません。  

## このゲームのテンプレートを有料の勉強会の教材に使っても良いですか？
問題ありません。  

## このゲームのテンプレートで3D文字当てゲーム以外を作っても良いですか？
問題ありません。  

## このゲームのテンプレートの一部を別のゲームに流用しても良いですか？
問題ありません。  

## このゲームのテンプレートで有償の開発代行・受注開発を行っても良いですか？
問題ありません。  

## エディタのレイアウトが変になってしまったのですが？
エディタ上部の［ウィンドウ］から［レイアウトをロード > デフォルトのエディタレイアウト］を左クリックすれば、エディタのレイアウトが初期状態に戻ります。  

![デフォルトのエディタレイアウトに戻すための項目の位置の図解](https://github.com/user-attachments/assets/d6cea8ce-18cb-4067-8066-1fbeeb3c8cec)

# Unreal Engine 5.5.1のパッケージ化の不具合について  
開発時の最新バージョンであるUnreal Engine 5.5.1において、ハードウェアレイトレーシングを無効化しないとWindows用シッピングビルドしたゲームが正常に動作しない不具合（2回目以降クラッシュする）があるようです。  

そのため、このゲームのテンプレートのプロジェクト設定ではハードウェアレイトレーシングの使用を無効化しています。  

![プロジェクト設定のハードウェアレイトレーシング無効箇所の図解UE050501_HardwareRayTracing_001](https://github.com/user-attachments/assets/6e1fa98d-dc48-4277-957c-f92a770bf76c)
